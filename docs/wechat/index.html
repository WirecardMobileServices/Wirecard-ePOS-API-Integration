



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.1.0">
    
    
      
        <title>WeChat Pay - Wirecard ePOS API</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.982221ab.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.01ccdecf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../stylesheets/minimal-epossdk.css">
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#workflow" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Wirecard ePOS API" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Wirecard ePOS API
            </span>
            <span class="md-header-nav__topic">
              WeChat Pay
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="Wirecard ePOS API" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Wirecard ePOS API
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Welcome" class="md-nav__link">
      Welcome
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Start
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Start
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../introduction/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../getting-started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Core Integration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Core Integration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../core_overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2" checked>
    
    <label class="md-nav__link" for="nav-3-2">
      Payment Methods
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        Payment Methods
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../cash/" title="Cash" class="md-nav__link">
      Cash
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../card/" title="Card" class="md-nav__link">
      Card
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../alipay/" title="Alipay" class="md-nav__link">
      Alipay
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        WeChat Pay
      </label>
    
    <a href="./" title="WeChat Pay" class="md-nav__link md-nav__link--active">
      WeChat Pay
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#workflow" title="Workflow" class="md-nav__link">
    Workflow
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-step-wechat-payment" title="1-step WeChat payment" class="md-nav__link">
    1-step WeChat payment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-step-wechat-payment" title="2-step WeChat payment" class="md-nav__link">
    2-step WeChat payment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#purchase-operation" title="Purchase Operation" class="md-nav__link">
    Purchase Operation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response-indicating-1-step-wechat-payment" title="Response indicating 1-step WeChat payment" class="md-nav__link">
    Response indicating 1-step WeChat payment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response-indicating-2-step-wechat-payment" title="Response indicating 2-step WeChat payment" class="md-nav__link">
    Response indicating 2-step WeChat payment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#confirm-operation" title="Confirm Operation" class="md-nav__link">
    Confirm Operation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_1" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reverse-operation" title="Reverse Operation" class="md-nav__link">
    Reverse Operation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reverse-request" title="Reverse Request" class="md-nav__link">
    Reverse Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reverse-response" title="Reverse Response" class="md-nav__link">
    Reverse Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#return-operation" title="Return Operation" class="md-nav__link">
    Return Operation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_2" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_1" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-a-sale-call" title="Get a Sale Call" class="md-nav__link">
    Get a Sale Call
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#purchase-transaction-lifecycle" title="Purchase Transaction Lifecycle" class="md-nav__link">
    Purchase Transaction Lifecycle
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../multi-tender/" title="Multi-tender Sale" class="md-nav__link">
      Multi-tender Sale
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../user/" title="User Management" class="md-nav__link">
      User Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../security/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Advanced Integration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Advanced Integration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../advanced_overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Sale Items
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        Sale Items
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../items/" title="General" class="md-nav__link">
      General
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../discounts/" title="Discounts" class="md-nav__link">
      Discounts
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      Product Catalogues
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        Product Catalogues
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../terminal-management/" title="General" class="md-nav__link">
      General
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../terminal-management/" title="Product Categories" class="md-nav__link">
      Product Categories
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../terminal-management/" title="Stock Management" class="md-nav__link">
      Stock Management
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-4" type="checkbox" id="nav-4-4">
    
    <label class="md-nav__link" for="nav-4-4">
      Merchant Management
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-4">
        Merchant Management
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../merchant-management/" title="General" class="md-nav__link">
      General
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../terminal-management/" title="Shop Management" class="md-nav__link">
      Shop Management
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5">
    
    <label class="md-nav__link" for="nav-4-5">
      Smart Cash-Register
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        Smart Cash-Register
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../terminal-management/" title="General" class="md-nav__link">
      General
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../terminal-management/" title="Shifts" class="md-nav__link">
      Shifts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../shift_reports/" title="Shift Reports" class="md-nav__link">
      Shift Reports
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../terminal-management/" title="Terminal Management" class="md-nav__link">
      Terminal Management
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../glossary/" title="Glossary" class="md-nav__link">
      Glossary
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#workflow" title="Workflow" class="md-nav__link">
    Workflow
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-step-wechat-payment" title="1-step WeChat payment" class="md-nav__link">
    1-step WeChat payment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-step-wechat-payment" title="2-step WeChat payment" class="md-nav__link">
    2-step WeChat payment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#purchase-operation" title="Purchase Operation" class="md-nav__link">
    Purchase Operation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response-indicating-1-step-wechat-payment" title="Response indicating 1-step WeChat payment" class="md-nav__link">
    Response indicating 1-step WeChat payment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response-indicating-2-step-wechat-payment" title="Response indicating 2-step WeChat payment" class="md-nav__link">
    Response indicating 2-step WeChat payment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#confirm-operation" title="Confirm Operation" class="md-nav__link">
    Confirm Operation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_1" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reverse-operation" title="Reverse Operation" class="md-nav__link">
    Reverse Operation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reverse-request" title="Reverse Request" class="md-nav__link">
    Reverse Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reverse-response" title="Reverse Response" class="md-nav__link">
    Reverse Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#return-operation" title="Return Operation" class="md-nav__link">
    Return Operation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_2" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_1" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-a-sale-call" title="Get a Sale Call" class="md-nav__link">
    Get a Sale Call
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#purchase-transaction-lifecycle" title="Purchase Transaction Lifecycle" class="md-nav__link">
    Purchase Transaction Lifecycle
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>WeChat Pay</h1>
                
                <p>WeChat Pay is one of China‘s leading payment methods. Since its start as a chat app, WeChat has grown to become a market-leading platform by connecting people, services, and businesses in China and around the world.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Visit <a href="https://www.wirecard.com/payment-base/wechat-pay">Wirecard website</a> to find out all benefits of WeChat payment.</p>
</div>
<p>From merchant perspective, WeChat can be either <a href="#1-step-wechat-payment">one-step</a> or <a href="#2-step-wechat-payment">two-step</a> payment:</p>
<ul>
<li>
<p>In case end-consumer (buyer) is not prompted to authorize payment on his device then all is needed is <a href="#purchase-operation">one request</a>.</p>
</li>
<li>
<p>In case end-consumer (buyer) is prompted to authorize payment with password or other equivalent (pin code, fingerprint, etc.) then merchant has to query Wirecard ePOS system in order to get the final status of WeChat transaction. Technically-wise, it means that initial <a href="#purchase-operation">request</a> (<em>PURCHASE</em>) has to be followed by <a href="#confirm-operation">query request</a> (<em>CONFIRM</em>).</p>
</li>
</ul>
<h2 id="workflow">Workflow</h2>
<h3 id="1-step-wechat-payment">1-step WeChat payment</h3>
<p><img alt="WeChat" src="../images/wechat.png" /></p>
<h3 id="2-step-wechat-payment">2-step WeChat payment</h3>
<p><img alt="WeChat" src="../images/wechat2.png" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Purchase requests are serviced at following URL:</p>
<div class="codehilite"><pre><span></span>https://switch.wirecard.com/mswitch-server/v1/sales
</pre></div>


<p>In context of Wirecard ePOS, term <strong>Purchase</strong> is used for both:</p>
<ul>
<li>type of Sale - called <em>Sale-Purchase</em> - created by request with PURCHASE operation</li>
<li>transaction type - <em>cash purchase</em> transaction, <em>card purchase</em> transaction, <em>alipay purchase</em> transaction and <em>wechat purchase</em> transaction</li>
</ul>
</div>
<h2 id="purchase-operation">Purchase Operation</h2>
<p>In order to process WeChat payment, make a <a href="https://switch.wirecard.com/mswitch-server/v1/sales"><code class="codehilite"><span class="err">POST /v1/sales</span></code></a> call:</p>
<h3 id="request">Request</h3>
<div class="codehilite"><pre><span></span>{
    &quot;multitender&quot;: &quot;true&quot;,
    &quot;operation&quot; : &quot;PURCHASE&quot;,
    &quot;note&quot; : &quot;Example Note&quot;,
    &quot;externalId&quot;: &quot;123456789&quot;,
    &quot;totalAmount&quot; : 10,
    &quot;currencyCode&quot; : &quot;EUR&quot;,
    &quot;payments&quot; : [
        {
            &quot;paymentMethod&quot; : &quot;WECHAT&quot;,
            &quot;transactionType&quot; : &quot;PURCHASE&quot;,
            &quot;amount&quot; : 10,
            &quot;consumerId&quot; : &quot;15050011719660761&quot;
        }
    ]
}
</pre></div>


<ul>
<li><code class="codehilite">&quot;multitender&quot;</code> - boolean flag<ul>
<li><code class="codehilite">&quot;TRUE&quot;</code> - required</li>
<li><code class="codehilite">&quot;FALSE&quot;</code> - deprecated</li>
</ul>
</li>
<li><code class="codehilite">&quot;operation&quot;</code> - defines type of Sale request; <code class="codehilite">&quot;PURCHASE&quot;</code> operation creates Sale-Purchase record</li>
<li><code class="codehilite">&quot;note&quot;</code> - <em>optional field</em> - used for merchant tracking purposes; it is forwarded to payment gateway in <code class="codehilite">&lt;order-detail&gt;</code> field</li>
<li><code class="codehilite">&quot;externalId&quot;</code> - <em>optional field</em> - used for merchant tracking purposes; it is forwarded to payment gateway in <code class="codehilite">&lt;order-number&gt;</code> field</li>
<li><code class="codehilite">&quot;totalAmount&quot;</code> - defines amount of Sale-Purchase </li>
<li><code class="codehilite">&quot;currencyCode&quot;</code> - defines currency, based on <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO 4217</a> standard</li>
<li><code class="codehilite">&quot;payments&quot;</code> - includes payment-specific information<ul>
<li><code class="codehilite">&quot;paymentMethod&quot;</code> - defines payment method</li>
<li><code class="codehilite">&quot;transactionType&quot;</code> - defines type of transaction; <code class="codehilite">&quot;PURCHASE&quot;</code> transaction moves funds from end-consumer to merchant</li>
<li><code class="codehilite">&quot;amount&quot;</code> - defines transaction amount</li>
<li><code class="codehilite">&quot;consumerId&quot;</code> - value of scanned barcode (QR code)</li>
</ul>
</li>
</ul>
<h3 id="response-indicating-1-step-wechat-payment">Response indicating 1-step WeChat payment</h3>
<p>In order to identify whether the follow-up <em>CONFIRM</em> operation is required, status code has to be interpreted.</p>
<p><strong>Status Code 1000 indicates</strong> that WeChat purchase transactions is completed and <strong>no follow-up request is required</strong>.</p>
<div class="codehilite"><pre><span></span>{
    &quot;operation&quot;: &quot;PURCHASE&quot;,
    &quot;timeStamp&quot;: &quot;2019-05-07T12:12:38.177Z&quot;,
    &quot;status&quot;: {
        &quot;code&quot;: &quot;1000&quot;,
        &quot;result&quot;: &quot;SUCCESS&quot;
    },
    &quot;id&quot;: &quot;241e578a773a4d869408f43928ddf1fd&quot;,
    &quot;externalCashierId&quot;: null,
    &quot;payments&quot;: [
        {
            &quot;paymentMethod&quot;: &quot;WECHAT&quot;,
            &quot;transactionType&quot;: &quot;PURCHASE&quot;,
            &quot;id&quot;: &quot;776af8e4a4d843129149bdf8b73c08b9&quot;,
            &quot;timeStamp&quot;: &quot;2019-05-07T12:12:32.9Z&quot;,
            &quot;statuses&quot;: [
                {
                    &quot;result&quot;: &quot;SUCCESS&quot;,
                    &quot;code&quot;: &quot;1000&quot;,
                    &quot;message&quot;: &quot;Transaction OK.&quot;
                }
            ],
            &quot;wechatProviderTransactionId&quot;: &quot;f75ab0866f55477cb35a2db5db6bb10d&quot;,
            &quot;wechatRate&quot;: &quot;691870000&quot;,
            &quot;wechatSubMchId&quot;: &quot;444917&quot;,
            &quot;wechatCashFee&quot;: &quot;6919&quot;,
            &quot;wechatTimeEnd&quot;: &quot;20190507201238&quot;,
            &quot;gatewayReference&quot;: &quot;573ee979-a265-49b9-b020-27418dbb63ef&quot;
        }
    ],
    &quot;externalId&quot;: null,
    &quot;merchantReceiptId&quot;: 262,
    &quot;multitender&quot;: true
}
</pre></div>


<ul>
<li><code class="codehilite">&quot;operation&quot;</code> - echoed from request</li>
<li><code class="codehilite">&quot;timeStamp&quot;</code> - date-time when response was constructed</li>
<li><code class="codehilite">&quot;status&quot;</code><ul>
<li><code class="codehilite">&quot;code&quot;</code> - <code class="codehilite">&quot;1000&quot;</code> means operation is completed successfully</li>
<li><code class="codehilite">&quot;result&quot;</code> - <code class="codehilite">&quot;SUCCESS&quot;</code> means operation is completed successfully</li>
</ul>
</li>
<li><code class="codehilite">&quot;id&quot;</code> - Sale-Purchase identifier assigned by Wirecard ePOS system</li>
<li><code class="codehilite">&quot;externalCashierId&quot;</code> - relevant for <a href="../advanced_overview/">Advanced Integration</a>; otherwise null</li>
<li><code class="codehilite">&quot;payments&quot;</code> - specific information for every payment method<ul>
<li><code class="codehilite">&quot;paymentMethod&quot;</code> - echoed from request</li>
<li><code class="codehilite">&quot;transactionType&quot;</code> - echoed from request</li>
<li><code class="codehilite">&quot;id&quot;</code> - identifier of purchase transaction assigned by Wirecard ePOS system</li>
<li><code class="codehilite">&quot;timeStamp&quot;</code> - date-time when transaction was processed by payment gateway</li>
<li><code class="codehilite">&quot;statuses&quot;</code><ul>
<li><code class="codehilite">&quot;result&quot;</code> - <code class="codehilite">&quot;SUCCESS&quot;</code> means transaction is completed successfully</li>
<li><code class="codehilite">&quot;code&quot;</code> - <code class="codehilite">&quot;1000&quot;</code> means transaction is completed successfully</li>
<li><code class="codehilite">&quot;message&quot;</code> - message provided by payment gateway</li>
</ul>
</li>
<li><code class="codehilite">&quot;wechatProviderTransactionId&quot;</code> - transaction identifier in WeChat System</li>
<li><code class="codehilite">&quot;wechatRate&quot;</code> - exchange rate between Sale currency and CNY in WeChat System; 691870000 means 6.918</li>
<li><code class="codehilite">&quot;wechatSubMchId&quot;</code> - merchant identifier in WeChat System</li>
<li><code class="codehilite">&quot;wechatCashFee&quot;</code> - amount in CNY (Chinese Yuan); 6919 means 69.19 CNY</li>
<li><code class="codehilite">&quot;wechatTimeEnd&quot;</code> - date-time in WeChat system</li>
<li><code class="codehilite">&quot;gatewayReference&quot;</code> - transaction identifier in Wirecard payment gateway</li>
</ul>
</li>
<li><code class="codehilite">&quot;externalId&quot;</code> - echoed from request</li>
<li><code class="codehilite">&quot;merchantReceiptId&quot;</code> - unique identifier per merchant; it is incremented with every Sale-Purchase and Sale-Return; advised to be printed on receipt as a barcode</li>
<li><code class="codehilite">&quot;multitender&quot;</code> - echoed from request</li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>After successful response, making <a href="#get-a-sale-call"><code class="codehilite"><span class="err">GET /v1/sales/{id}</span></code></a> call is advised, as it provides all information.</p>
</div>
<h3 id="response-indicating-2-step-wechat-payment">Response indicating 2-step WeChat payment</h3>
<p>In order to identify whether the follow-up <em>CONFIRM</em> operation is required, status code has to be interpreted.</p>
<p><strong>Status Code 1001 indicates</strong> that WeChat purchase transactions is not completed and <strong>follow-up <em>CONFIRM</em> request is required</strong>.</p>
<div class="codehilite"><pre><span></span>{
    &quot;operation&quot;: &quot;PURCHASE&quot;,
    &quot;timeStamp&quot;: &quot;2019-05-07T12:01:24.703Z&quot;,
    &quot;status&quot;: {
        &quot;code&quot;: &quot;1001&quot;,
        &quot;result&quot;: &quot;SUCCESS&quot;
    },
    &quot;id&quot;: &quot;3c9cf14fe82f42bfbecb6dec22edbfe3&quot;,
    &quot;externalCashierId&quot;: null,
    &quot;payments&quot;: [
        {
            &quot;paymentMethod&quot;: &quot;WECHAT&quot;,
            &quot;transactionType&quot;: &quot;PURCHASE&quot;,
            &quot;id&quot;: &quot;9685e8c3620a4c6b8e98518c7b2427d4&quot;,
            &quot;timeStamp&quot;: &quot;2019-05-07T12:01:24.614Z&quot;,
            &quot;statuses&quot;: [
                {
                    &quot;result&quot;: &quot;SUCCESS&quot;,
                    &quot;code&quot;: &quot;1001&quot;,
                    &quot;message&quot;: &quot;Transaction OK.&quot;
                }
            ],
            &quot;wechatSubMchId&quot;: &quot;693876&quot;,
            &quot;gatewayReference&quot;: &quot;c7d76bcf-595d-4318-a9b9-38ac9ac1d53a&quot;
        }
    ],
    &quot;externalId&quot;: null,
    &quot;merchantReceiptId&quot;: 261,
    &quot;multitender&quot;: true
}
</pre></div>


<ul>
<li><code class="codehilite">&quot;operation&quot;</code> - echoed from request</li>
<li><code class="codehilite">&quot;timeStamp&quot;</code> - date-time when response was constructed</li>
<li><code class="codehilite">&quot;status&quot;</code><ul>
<li><code class="codehilite">&quot;code&quot;</code> - <code class="codehilite">&quot;1001&quot;</code> means operation is successful, however follow-up <code class="codehilite">&quot;CONFIRM&quot;</code> request is required to complete WeChat purchase transaction</li>
<li><code class="codehilite">&quot;result&quot;</code> - <code class="codehilite">&quot;SUCCESS&quot;</code> means operation is successful</li>
</ul>
</li>
<li><code class="codehilite">&quot;id&quot;</code> - Sale-Purchase identifier assigned by Wirecard ePOS system</li>
<li><code class="codehilite">&quot;externalCashierId&quot;</code> - relevant for <a href="../advanced_overview/">Advanced Integration</a>; otherwise null</li>
<li><code class="codehilite">&quot;payments&quot;</code> - specific information for every payment method<ul>
<li><code class="codehilite">&quot;paymentMethod&quot;</code> - echoed from request</li>
<li><code class="codehilite">&quot;transactionType&quot;</code> - echoed from request</li>
<li><code class="codehilite">&quot;id&quot;</code> - identifier of purchase transaction assigned by Wirecard ePOS system</li>
<li><code class="codehilite">&quot;timeStamp&quot;</code> - date-time when transaction was processed by payment gateway</li>
<li><code class="codehilite">&quot;statuses&quot;</code><ul>
<li><code class="codehilite">&quot;result&quot;</code> - <code class="codehilite">&quot;SUCCESS&quot;</code> means transaction is successful</li>
<li><code class="codehilite">&quot;code&quot;</code> - <code class="codehilite">&quot;1001&quot;</code> means transaction is successful</li>
<li><code class="codehilite">&quot;message&quot;</code> - message provided by payment gateway</li>
</ul>
</li>
<li><code class="codehilite">&quot;wechatSubMchId&quot;</code> - merchant identifier in WeChat System</li>
<li><code class="codehilite">&quot;gatewayReference&quot;</code> - transaction identifier in Wirecard payment gateway</li>
</ul>
</li>
<li><code class="codehilite">&quot;externalId&quot;</code> - echoed from request</li>
<li><code class="codehilite">&quot;merchantReceiptId&quot;</code> - unique identifier per merchant; it is incremented with every Sale-Purchase and Sale-Return; advised to be printed on receipt as a barcode</li>
<li><code class="codehilite">&quot;multitender&quot;</code> - echoed from request</li>
</ul>
<h2 id="confirm-operation">Confirm Operation</h2>
<h3 id="request_1">Request</h3>
<div class="codehilite"><pre><span></span>{
    &quot;operation&quot; : &quot;CONFIRM&quot;,
    &quot;originalSaleId&quot; : &quot;3c9cf14fe82f42bfbecb6dec22edbfe3&quot;,
    &quot;payments&quot; : [
        {
            &quot;paymentMethod&quot; : &quot;WECHAT&quot;,
            &quot;transactionType&quot; : &quot;CONFIRM&quot;
        }
    ]
}
</pre></div>


<ul>
<li><code class="codehilite">&quot;operation&quot;</code> - defines type of Sale request; <code class="codehilite">&quot;CONFIRM&quot;</code> operation does finish the WeChat Purchase transaction</li>
<li><code class="codehilite">&quot;originalSaleId&quot;</code> - identifier of original Sale-Purchase</li>
<li><code class="codehilite">&quot;payments&quot;</code> - includes payment-specific information<ul>
<li><code class="codehilite">&quot;paymentMethod&quot;</code> - defines payment method; it must be same as original payment transaction</li>
<li><code class="codehilite">&quot;transactionType&quot;</code> - defines type of transaction; <code class="codehilite">&quot;CONFIRM&quot;</code> operation must include <code class="codehilite">&quot;CONFIRM&quot;</code> transaction type</li>
</ul>
</li>
</ul>
<h3 id="response">Response</h3>
<p><strong>Status Code 1000</strong> indicates that WeChat purchase transaction is completed successfully.</p>
<div class="codehilite"><pre><span></span>{
    &quot;operation&quot;: &quot;CONFIRM&quot;,
    &quot;timeStamp&quot;: &quot;2019-05-07T12:02:24.739Z&quot;,
    &quot;status&quot;: {
        &quot;code&quot;: &quot;1000&quot;,
        &quot;result&quot;: &quot;SUCCESS&quot;
    },
    &quot;id&quot;: &quot;3c9cf14fe82f42bfbecb6dec22edbfe3&quot;,
    &quot;externalCashierId&quot;: null,
    &quot;payments&quot;: [
        {
            &quot;paymentMethod&quot;: &quot;WECHAT&quot;,
            &quot;transactionType&quot;: &quot;CONFIRM&quot;,
            &quot;id&quot;: &quot;9685e8c3620a4c6b8e98518c7b2427d4&quot;,
            &quot;timeStamp&quot;: &quot;2019-05-07T12:02:24.641Z&quot;,
            &quot;statuses&quot;: [
                {
                    &quot;result&quot;: &quot;SUCCESS&quot;,
                    &quot;code&quot;: &quot;1000&quot;,
                    &quot;message&quot;: &quot;Transaction OK.&quot;
                }
            ],
            &quot;wechatProviderTransactionId&quot;: &quot;dced92fe6e5042a8856bf8e3dc7c15f8&quot;,
            &quot;wechatRate&quot;: &quot;691870000&quot;,
            &quot;wechatSubMchId&quot;: &quot;839907&quot;,
            &quot;wechatCashFee&quot;: &quot;6919&quot;,
            &quot;wechatTimeEnd&quot;: &quot;20190507200224&quot;,
            &quot;gatewayReference&quot;: &quot;ae0d14df-7528-4e5e-b2d6-4393b8c767d9&quot;
        }
    ]
}
</pre></div>


<ul>
<li><code class="codehilite">&quot;operation&quot;</code> - echoed from request</li>
<li><code class="codehilite">&quot;timeStamp&quot;</code> - date-time when response was constructed</li>
<li><code class="codehilite">&quot;status&quot;</code><ul>
<li><code class="codehilite">&quot;code&quot;</code> - <code class="codehilite">&quot;1000&quot;</code> means operation is successful</li>
<li><code class="codehilite">&quot;result&quot;</code> - <code class="codehilite">&quot;SUCCESS&quot;</code> means operation is successful</li>
</ul>
</li>
<li><code class="codehilite">&quot;id&quot;</code> - Sale-Purchase identifier assigned by Wirecard ePOS system</li>
<li><code class="codehilite">&quot;externalCashierId&quot;</code> - relevant for <a href="../advanced_overview/">Advanced Integration</a>; otherwise null</li>
<li><code class="codehilite">&quot;payments&quot;</code> - specific information for every payment method<ul>
<li><code class="codehilite">&quot;paymentMethod&quot;</code> - echoed from request</li>
<li><code class="codehilite">&quot;transactionType&quot;</code> - echoed from request</li>
<li><code class="codehilite">&quot;id&quot;</code> - identifier of purchase transaction assigned by Wirecard ePOS system</li>
<li><code class="codehilite">&quot;timeStamp&quot;</code> - date-time when transaction was processed by payment gateway</li>
<li><code class="codehilite">&quot;statuses&quot;</code><ul>
<li><code class="codehilite">&quot;result&quot;</code> - <code class="codehilite">&quot;SUCCESS&quot;</code> means transaction is successful</li>
<li><code class="codehilite">&quot;code&quot;</code> - <code class="codehilite">&quot;1000&quot;</code> means transaction is successful</li>
<li><code class="codehilite">&quot;message&quot;</code> - message provided by payment gateway</li>
</ul>
</li>
<li><code class="codehilite">&quot;wechatProviderTransactionId&quot;</code> - transaction identifier in WeChat System</li>
<li><code class="codehilite">&quot;wechatRate&quot;</code> - exchange rate between Sale currency and CNY in WeChat System; 691870000 means 6.918</li>
<li><code class="codehilite">&quot;wechatSubMchId&quot;</code> - merchant identifier in WeChat System</li>
<li><code class="codehilite">&quot;wechatCashFee&quot;</code> - amount in CNY (Chinese Yuan); 6919 means 69.19 CNY</li>
<li><code class="codehilite">&quot;wechatTimeEnd&quot;</code> - date-time in WeChat system</li>
<li><code class="codehilite">&quot;gatewayReference&quot;</code> - transaction identifier in Wirecard payment gateway</li>
</ul>
</li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>After successful response, making <a href="#get-a-sale-call"><code class="codehilite"><span class="err">GET /v1/sales/{id}</span></code></a> call is advised, as it provides all information.</p>
</div>
<h2 id="reverse-operation">Reverse Operation</h2>
<p><em>REVERSE</em> operation is typically used in case purchase transaction was created accidentally and hence needs to be reversed.</p>
<p>In order to reverse WeChat purchase transaction, make a <a href="https://switch.wirecard.com/mswitch-server/v1/sales"><code class="codehilite"><span class="err">POST /v1/sales</span></code></a> call:</p>
<h3 id="reverse-request">Reverse Request</h3>
<div class="codehilite"><pre><span></span>{
    &quot;operation&quot;: &quot;REVERSE&quot;,
    &quot;originalSaleId&quot;: &quot;a0a09836df08426b92d4805294bdae42&quot;,
    &quot;payments&quot;: [
        { 
            &quot;paymentMethod&quot;: &quot;WECHAT&quot;,
            &quot;transactionType&quot;: &quot;REVERSAL&quot;,
            &quot;originalTransactionId&quot; : &quot;809364e83e3043c7a15182140d55268e&quot;
        }
    ]
}
</pre></div>


<ul>
<li><code class="codehilite">&quot;operation&quot;</code> - defines type of Sale request</li>
<li><code class="codehilite">&quot;originalSaleId&quot;</code> - identifier of original Sale-Purchase</li>
<li><code class="codehilite">&quot;payments&quot;</code> - includes payment-specific information<ul>
<li><code class="codehilite">&quot;paymentMethod&quot;</code> - defines payment method; it must be same as original payment transaction</li>
<li><code class="codehilite">&quot;transactionType&quot;</code> - defines type of this transaction; <code class="codehilite">&quot;REVERSE&quot;</code> operation must include <code class="codehilite">&quot;REVERSAL&quot;</code> transaction type</li>
<li><code class="codehilite">&quot;originalTransactionId&quot;</code> - identifier of original purchase transaction</li>
</ul>
</li>
</ul>
<h3 id="reverse-response">Reverse Response</h3>
<div class="codehilite"><pre><span></span>{
    &quot;operation&quot;: &quot;REVERSE&quot;,
    &quot;timeStamp&quot;: &quot;2019-05-16T13:08:24.657Z&quot;,
    &quot;status&quot;: {
        &quot;code&quot;: &quot;1000&quot;,
        &quot;result&quot;: &quot;SUCCESS&quot;
    },
    &quot;id&quot;: &quot;a0a09836df08426b92d4805294bdae42&quot;,
    &quot;externalCashierId&quot;: null,
    &quot;payments&quot;: [
        {
            &quot;paymentMethod&quot;: &quot;WECHAT&quot;,
            &quot;transactionType&quot;: &quot;REVERSAL&quot;,
            &quot;id&quot;: &quot;c254b80758574ce387d3852e1d69c3ec&quot;,
            &quot;timeStamp&quot;: &quot;2019-05-16T13:08:24.553Z&quot;,
            &quot;statuses&quot;: [
                {
                    &quot;result&quot;: &quot;SUCCESS&quot;,
                    &quot;code&quot;: &quot;1000&quot;,
                    &quot;message&quot;: &quot;Transaction OK.&quot;
                }
            ],
            &quot;wechatProviderTransactionId&quot;: &quot;adfc24a6c25343ce86f5cb180a5cc528&quot;,
            &quot;wechatRate&quot;: &quot;691870000&quot;,
            &quot;wechatSubMchId&quot;: &quot;067227&quot;,
            &quot;wechatDeviceInfo&quot;: &quot;dell&quot;,
            &quot;wechatCashFee&quot;: &quot;6919.00&quot;,
            &quot;wechatTimeEnd&quot;: &quot;20190516210824&quot;,
            &quot;gatewayReference&quot;: &quot;8ba7937e-ea22-4b9f-855a-dce11e4a29b7&quot;
        }
    ]
}
</pre></div>


<p>In order to explicitly <a href="../multi-tender/#what-is-sale-lifecycle-model">change state of Sale-Purchase to CANCELED</a>, make a  <code class="codehilite"><span class="err">POST /v1/sales</span></code> call with <a href="../multi-tender/#what-is-cancel-operation"><em>CANCEL</em> operation</a>.</p>
<h2 id="return-operation">Return Operation</h2>
<p><em>RETURN</em> operation is used in case end-consumer returns merchandise and asks for a refund. Wirecard ePOS support partial as well as full return.</p>
<p>In order to process WeChat refund transaction, make a <a href="https://switch.wirecard.com/mswitch-server/v1/sales"><code class="codehilite"><span class="err">POST /v1/sales</span></code></a> call defined below:</p>
<h3 id="request_2">Request</h3>
<div class="codehilite"><pre><span></span>{
    &quot;operation&quot; : &quot;RETURN&quot;,
    &quot;totalAmount&quot; : 10,
    &quot;currencyCode&quot; : &quot;EUR&quot;,
    &quot;originalSaleId&quot; : &quot;1025a74c86564982988f66a46489d87a&quot;,
    &quot;payments&quot; : [ 
        {
            &quot;paymentMethod&quot; : &quot;WECHAT&quot;,
            &quot;transactionType&quot; : &quot;REFERENCE_REFUND&quot;,
            &quot;amount&quot; : 10,
            &quot;originalTransactionId&quot; : &quot;f4c16e2ee76d44d2adfc42b97ac3e5a0&quot;
        }
    ]
}
</pre></div>


<h3 id="response_1">Response</h3>
<div class="codehilite"><pre><span></span>{
    &quot;operation&quot;: &quot;RETURN&quot;,
    &quot;timeStamp&quot;: &quot;2019-05-17T10:40:48.648Z&quot;,
    &quot;status&quot;: {
        &quot;code&quot;: &quot;1000&quot;,
        &quot;result&quot;: &quot;SUCCESS&quot;
    },
    &quot;id&quot;: &quot;ba313afaf21e445abc802ab63bb69c5a&quot;,
    &quot;externalCashierId&quot;: null,
    &quot;payments&quot;: [
        {
            &quot;paymentMethod&quot;: &quot;WECHAT&quot;,
            &quot;transactionType&quot;: &quot;REFERENCE_REFUND&quot;,
            &quot;id&quot;: &quot;1baf69229f584858ad524585db27115a&quot;,
            &quot;timeStamp&quot;: &quot;2019-05-17T10:40:48.533Z&quot;,
            &quot;statuses&quot;: [
                {
                    &quot;result&quot;: &quot;SUCCESS&quot;,
                    &quot;code&quot;: &quot;1000&quot;,
                    &quot;message&quot;: &quot;Transaction OK.&quot;
                }
            ],
            &quot;wechatProviderTransactionId&quot;: &quot;f5fd9c49306a4322a9e613d741c71de3&quot;,
            &quot;wechatRate&quot;: &quot;691870000&quot;,
            &quot;wechatSubMchId&quot;: &quot;785721&quot;,
            &quot;wechatDeviceInfo&quot;: &quot;dell&quot;,
            &quot;wechatCashFee&quot;: &quot;6919.00&quot;,
            &quot;wechatTimeEnd&quot;: &quot;20190517184048&quot;,
            &quot;gatewayReference&quot;: &quot;4fb9f8a2-7fb9-4fd7-a88c-154f58fb7ab8&quot;
        }
    ],
    &quot;externalId&quot;: null,
    &quot;merchantReceiptId&quot;: 270
}
</pre></div>


<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To see all <code class="codehilite">/v1/sales</code> request &amp; response examples, <a href="https://switch-test.wirecard.com/mswitch-server/doc/api-doc-sale-examples.html">click here</a>.</p>
</div>
<h2 id="get-a-sale-call">Get a Sale Call</h2>
<p>Example of <code class="codehilite"><span class="err">GET /v1/sales/{id}</span></code> call with excluded <em>merchant</em> and <em>user</em> fields (described in <a href="../merchant-management/">Merchant Management</a> and <a href="../user/">User Management</a> respectively):</p>
<div class="codehilite"><pre><span></span>GET https://switch-test.wirecard.com/mswitch-server/v1/sales/3c9cf14fe82f42bfbecb6dec22edbfe3?excludeField=merchant&amp;excludeField=user

{
    &quot;id&quot;: &quot;3c9cf14fe82f42bfbecb6dec22edbfe3&quot;,
    &quot;type&quot;: &quot;PURCHASE&quot;,
    &quot;status&quot;: &quot;COMPLETED&quot;,
    &quot;totalAmount&quot;: 10,
    &quot;note&quot;: null,
    &quot;externalId&quot;: null,
    &quot;externalCashierId&quot;: null,
    &quot;customerId&quot;: null,
    &quot;initialized&quot;: &quot;2019-05-07T12:01:24.44Z&quot;,
    &quot;shop&quot;: null,
    &quot;currency&quot;: {
        &quot;number&quot;: 978,
        &quot;code&quot;: &quot;EUR&quot;,
        &quot;name&quot;: &quot;Euro&quot;,
        &quot;minorUnit&quot;: 2
    },
    &quot;unitPricesIncludeTax&quot;: null,
    &quot;items&quot;: [
    ],
    &quot;transactions&quot;: [
        {
            &quot;type&quot;: &quot;WECHAT_PURCHASE&quot;,
            &quot;id&quot;: &quot;9685e8c3620a4c6b8e98518c7b2427d4&quot;,
            &quot;status&quot;: &quot;COMPLETED&quot;,
            &quot;amount&quot;: 10,
            &quot;lastUpdated&quot;: &quot;2019-05-07T12:02:24.668Z&quot;,
            &quot;initialized&quot;: &quot;2019-05-07T12:01:24.442Z&quot;,
            &quot;message&quot;: &quot;The resource was successfully created on WeChat side.\nWas: The resource was successfully created on WeChat side, but password confirmation is needed.&quot;,
            &quot;gateway&quot;: {
                &quot;id&quot;: &quot;wdEeSimulated&quot;,
                &quot;name&quot;: &quot;Wirecard EE Simulated&quot;,
                &quot;type&quot;: &quot;WIRECARD_EE_SIMULATED&quot;,
                &quot;url&quot;: &quot;http://dummy&quot;
            },
            &quot;gatewayReference&quot;: &quot;c7d76bcf-595d-4318-a9b9-38ac9ac1d53a&quot;,
            &quot;processedByGateway&quot;: &quot;2019-05-07T12:01:24.614Z&quot;,
            &quot;wechatProviderTransactionId&quot;: &quot;dced92fe6e5042a8856bf8e3dc7c15f8&quot;,
            &quot;wechatRate&quot;: &quot;691870000&quot;,
            &quot;wechatSubMchId&quot;: &quot;839907&quot;,
            &quot;wechatDeviceInfo&quot;: &quot;dell&quot;,
            &quot;wechatCashFee&quot;: &quot;6919.00&quot;,
            &quot;wechatTimeEnd&quot;: &quot;20190507200224&quot;,
            &quot;autoResolveTransactions&quot;: [

        ],
            &quot;transactionBarcodeId&quot;: &quot;15050011719660761&quot;
        }
    ],
    &quot;location&quot;: null,
    &quot;clientInfo&quot;: null,
    &quot;merchantReceiptId&quot;: 261,
    &quot;cancelledBy&quot;: null,
    &quot;shiftId&quot;: null,
    &quot;cashRegisterId&quot;: null,
    &quot;emailForReceipt&quot;: null,
    &quot;emailForReceiptProvided&quot;: false,
    &quot;multitender&quot;: true
}
</pre></div>


<h2 id="purchase-transaction-lifecycle">Purchase Transaction Lifecycle</h2>
<p><img alt="WeChat Purchase Lifecycle" src="../images/wechat_purchase_lifecycle.png" /></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../alipay/" title="Alipay" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Alipay
              </span>
            </div>
          </a>
        
        
          <a href="../multi-tender/" title="Multi-tender Sale" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Multi-tender Sale
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/WirecardMobileServices/Wirecard-ePOS-iOS" class="md-footer-social__link fa fa-apple"></a>
    
      <a href="https://github.com/WirecardMobileServices/Wirecard-ePOS-Android" class="md-footer-social__link fa fa-android"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.2ba8dec4.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
        <script src="../javascript/external-links.js"></script>
      
    
  </body>
</html>